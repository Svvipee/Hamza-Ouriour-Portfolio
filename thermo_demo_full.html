<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<title>Thermo-Fluids Cycle Visualizer Demo | Hamza Ouriour</title>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<style>
body{margin:0;padding:0;background:#050816;color:#e5e7eb;font-family:system-ui,sans-serif}
.hero{padding:80px 20px 40px;max-width:1080px;margin:auto}
h1{font-size:2.4rem;font-weight:700;background:linear-gradient(to right,#a855f7,#4f46e5,#22d3ee);-webkit-background-clip:text;color:transparent;margin-bottom:10px}
.subtitle{color:#9ca3af;font-size:0.95rem;max-width:600px}
.panel{max-width:1080px;margin:30px auto;background:rgba(15,23,42,.96);border:1px solid rgba(31,41,55,.8);border-radius:20px;padding:30px;box-shadow:0 20px 40px rgba(0,0,0,.45)}
label{display:block;margin-top:18px;color:#cbd5e1;font-size:.92rem}
input{width:100%;padding:10px;margin-top:6px;border-radius:10px;border:1px solid #374151;background:#0f172a;color:white}
button{margin-top:25px;padding:12px 22px;background:linear-gradient(135deg,#4f46e5,#9333ea);border:none;border-radius:12px;color:white;cursor:pointer;font-size:1rem;box-shadow:0 10px 25px rgba(79,70,229,.4)}
button:hover{filter:brightness(1.1);transform:translateY(-2px)}
canvas{width:100%;margin-top:30px;border-radius:16px;background:#0f172a;border:1px solid #374151}
pre{white-space:pre-wrap;background:#0f172a;padding:20px;border-radius:16px;margin-top:25px;border:1px solid #374151;font-size:.85rem;color:#cbd5e1;overflow:auto}
.code-title{font-size:1.3rem;margin-top:40px;font-weight:600}
.back{display:inline-block;margin:20px 0;color:#8ab4ff}
.back:hover{text-decoration:underline}
</style>
</head>
<body>

<div class='hero'>
  <h1>Thermo-Fluids Cycle Visualizer Demo</h1>
  <p class='subtitle'>
    Interactive simulation of an ideal Brayton cycle with real computed values and a drawn T–s style curve.
    This page also exposes the full source code so reviewers can see exactly how it works.
  </p>
</div>

<div class='panel'>
  <label>Pressure Ratio (P₂/P₁)</label>
  <input type='number' id='pr' value='8' min='1' step='0.1'>

  <label>Specific Heat Ratio γ</label>
  <input type='number' id='gamma' value='1.4' min='1.1' max='1.67' step='0.01'>

  <label>Inlet Temperature (K)</label>
  <input type='number' id='T1' value='300' min='200' step='1'>

  <button onclick='runCycle()'>Run Cycle</button>

  <div id='result'></div>
  <canvas id='chart' width='900' height='420'></canvas>

  <h2 class='code-title'>How This Demo Works (Full Source Code)</h2>
  <pre>
// Thermodynamic model:
// Ideal Brayton cycle with user-defined pressure ratio (PR), gamma, and T1.
// State temperatures are computed as:
//   T2 = T1 * PR^((γ - 1)/γ)
//   T3 = T2 * 2.5          (pseudo heat addition factor for visualization)
//   T4 = T3 / PR^((γ - 1)/γ)
// Cycle thermal efficiency:
//   η = 1 - 1 / PR^((γ - 1)/γ)
//
// JavaScript responsibilities:
// • Read the inputs from the form
// • Compute state temperatures and efficiency
// • Write formatted results back to the page
// • Draw a stylized T–s-like curve on an HTML5 canvas

function runCycle() {
  const pr    = parseFloat(document.getElementById('pr').value);
  const gamma = parseFloat(document.getElementById('gamma').value);
  const T1    = parseFloat(document.getElementById('T1').value);

  // Ideal Brayton relations:
  const exp  = (gamma - 1) / gamma;
  const T2   = T1 * Math.pow(pr, exp);
  const T3   = T2 * 2.5;               // pseudo heat addition
  const T4   = T3 / Math.pow(pr, exp);
  const eff  = 1 - 1 / Math.pow(pr, exp);

  document.getElementById('result').innerHTML =
    "Thermal Efficiency: " + (eff * 100).toFixed(2) + "%\n" +
    "T₂: " + T2.toFixed(1) + " K | " +
    "T₃: " + T3.toFixed(1) + " K | " +
    "T₄: " + T4.toFixed(1) + " K";

  drawChart(T1, T2, T3, T4);
}

function drawChart(T1, T2, T3, T4) {
  const canvas = document.getElementById("chart");
  const ctx    = canvas.getContext("2d");

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Axes
  ctx.strokeStyle = "#4f46e5";
  ctx.lineWidth   = 2;
  ctx.beginPath();
  ctx.moveTo(50, 380); ctx.lineTo(850, 380);  // x-axis
  ctx.moveTo(50, 380); ctx.lineTo(50,  40);   // y-axis
  ctx.stroke();

  // Scale temperatures into the canvas vertical range
  const Tmax  = T4 * 1.2;
  const scale = T => 380 - (T / Tmax) * 320;

  const pts = [
    { x: 150, y: scale(T1) },
    { x: 350, y: scale(T2) },
    { x: 550, y: scale(T3) },
    { x: 750, y: scale(T4) }
  ];

  // Connect the cycle points
  ctx.strokeStyle = "#a855f7";
  ctx.lineWidth   = 3;
  ctx.beginPath();
  ctx.moveTo(pts[0].x, pts[0].y);
  for (const p of pts) ctx.lineTo(p.x, p.y);
  ctx.stroke();

  // Draw markers
  ctx.fillStyle = "#22d3ee";
  for (const p of pts) {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 6, 0, Math.PI * 2);
    ctx.fill();
  }
}
  </pre>

  <a class='back' href='index.html'>← Back to Portfolio</a>
</div>

<script>
function runCycle() {
  const pr    = parseFloat(document.getElementById('pr').value);
  const gamma = parseFloat(document.getElementById('gamma').value);
  const T1    = parseFloat(document.getElementById('T1').value);

  const exp  = (gamma - 1) / gamma;
  const T2   = T1 * Math.pow(pr, exp);
  const T3   = T2 * 2.5;
  const T4   = T3 / Math.pow(pr, exp);
  const eff  = 1 - 1 / Math.pow(pr, exp);

  document.getElementById('result').innerHTML =
    `<p style='margin-top:20px;font-size:1rem;'>
      <strong>Thermal Efficiency:</strong> ${(eff*100).toFixed(2)}%<br><br>
      <strong>T₂:</strong> ${T2.toFixed(1)} K &nbsp;&nbsp;
      <strong>T₃:</strong> ${T3.toFixed(1)} K &nbsp;&nbsp;
      <strong>T₄:</strong> ${T4.toFixed(1)} K
     </p>`;

  drawChart(T1, T2, T3, T4);
}

function drawChart(T1, T2, T3, T4) {
  const canvas = document.getElementById("chart");
  const ctx    = canvas.getContext("2d");

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.strokeStyle = "#4f46e5";
  ctx.lineWidth   = 2;
  ctx.beginPath();
  ctx.moveTo(50, 380); ctx.lineTo(850, 380);
  ctx.moveTo(50, 380); ctx.lineTo(50,  40);
  ctx.stroke();

  const Tmax  = T4 * 1.2;
  const scale = T => 380 - (T / Tmax) * 320;

  const pts = [
    { x: 150, y: scale(T1) },
    { x: 350, y: scale(T2) },
    { x: 550, y: scale(T3) },
    { x: 750, y: scale(T4) }
  ];

  ctx.strokeStyle = "#a855f7";
  ctx.lineWidth   = 3;
  ctx.beginPath();
  ctx.moveTo(pts[0].x, pts[0].y);
  for (const p of pts) ctx.lineTo(p.x, p.y);
  ctx.stroke();

  ctx.fillStyle = "#22d3ee";
  for (const p of pts) {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 6, 0, Math.PI * 2);
    ctx.fill();
  }
}

// Run once on load
runCycle();
</script>

</body>
</html>
